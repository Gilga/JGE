<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>GLExtendedFunctions.jl · JGE</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link href="../../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>JGE</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../../../manual/start.html">Start</a></li></ul></li><li><span class="toctext">Source Files</span><ul><li><a class="toctext" href="../../App.html">App.jl</a></li><li><a class="toctext" href="../../CoreExtended.html">CoreExtended.jl</a></li><li><a class="toctext" href="../../Environment.html">Environment.jl</a></li><li><a class="toctext" href="../../FileManager.html">FileManager.jl</a></li><li><a class="toctext" href="../../JLScriptManager.html">JLScriptManager.jl</a></li><li><a class="toctext" href="../../LoggerManager.html">LoggerManager.jl</a></li><li><a class="toctext" href="../../MatrixMath.html">MatrixMath.jl</a></li><li><a class="toctext" href="../../RessourceManager.html">RessourceManager.jl</a></li><li><a class="toctext" href="../../ThreadFunctions.html">ThreadFunctions.jl</a></li><li><a class="toctext" href="../../ThreadManager.html">ThreadManager.jl</a></li><li><a class="toctext" href="../../TimeManager.html">TimeManager.jl</a></li><li><a class="toctext" href="../../WindowManager.html">WindowManager.jl</a></li><li><a class="toctext" href="../../JLGEngine.html">JLGEngine.jl</a></li><li><a class="toctext" href="../CameraManager.html">CameraManager.jl</a></li><li><a class="toctext" href="../ChunkManager.html">ChunkManager.jl</a></li><li><a class="toctext" href="../EntityManager.html">EntityManager.jl</a></li><li><a class="toctext" href="../GameObjectManager.html">GameObjectManager.jl</a></li><li><a class="toctext" href="../GraphicsManager.html">GraphicsManager.jl</a></li><li><a class="toctext" href="../Management.html">Management.jl</a></li><li><a class="toctext" href="../MeshManager.html">MeshManager.jl</a></li><li><a class="toctext" href="../ModelManager.html">ModelManager.jl</a></li><li><a class="toctext" href="../RenderManager.html">RenderManager.jl</a></li><li><a class="toctext" href="../ShaderManager.html">ShaderManager.jl</a></li><li><a class="toctext" href="../StorageManager.html">StorageManager.jl</a></li><li><a class="toctext" href="../SzeneManager.html">SzeneManager.jl</a></li><li><a class="toctext" href="../TextureManager.html">TextureManager.jl</a></li><li><a class="toctext" href="../TransformManager.html">TransformManager.jl</a></li><li><a class="toctext" href="../ModelManager/MeshData.html">MeshData.jl</a></li><li><a class="toctext" href="../ModelManager/MeshFabric.html">MeshFabric.jl</a></li><li><a class="toctext" href="../ModelManager/MeshLoader_OBJ.html">MeshLoader_OBJ.jl</a></li><li><a class="toctext" href="LibGL.html">LibGL.jl</a></li><li><a class="toctext" href="GLDebugControl.html">GLDebugControl.jl</a></li><li class="current"><a class="toctext" href="GLExtendedFunctions.html">GLExtendedFunctions.jl</a><ul class="internal"><li><a class="toctext" href="#display-information-for-a-program&#39;s-attributes-1">display information for a program&#39;s attributes</a></li><li><a class="toctext" href="#display-info-for-all-active-uniforms-in-a-program-1">display info for all active uniforms in a program</a></li><li><a class="toctext" href="#display-the-values-for-a-uniform-in-a-named-block-1">display the values for a uniform in a named block```</a></li><li><a class="toctext" href="#display-program&#39;s-information-1">display program&#39;s information</a></li></ul></li><li><a class="toctext" href="GLLists.html">GLLists.jl</a></li><li><a class="toctext" href="GLSLParser.html">GLSLParser.jl</a></li><li><a class="toctext" href="GLSLRessources.html">GLSLRessources.jl</a></li><li><a class="toctext" href="ShaderManager.html">GL/ShaderManager.jl</a></li><li><a class="toctext" href="StorageManager.html">GL/StorageManager.jl</a></li><li><a class="toctext" href="TextureManager.html">GL/TextureManager.jl</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Source Files</li><li><a href="GLExtendedFunctions.html">GLExtendedFunctions.jl</a></li></ul><a class="edit-page" href="https://github.com/Gilga/JGE/blob/master/doc/src/files/JLGEngine/LibGL/GLExtendedFunctions.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>GLExtendedFunctions.jl</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="GLExtendedFunctions.jl-1" href="#GLExtendedFunctions.jl-1">GLExtendedFunctions.jl</a></h1><p>using MatrixMath using ModernGL</p><pre><code class="language-none">function glGetActiveUniform(program::GLuint, index::Integer)
    actualLength   = GLsizei[1]
    uniformSize    = GLint[1]
    typ            = GLenum[1]
    maxcharsize    = glGetProgramiv(program, GL_ACTIVE_UNIFORM_MAX_LENGTH)
    name           = Vector{GLchar}(maxcharsize)

    glGetActiveUniform(program, index, maxcharsize, actualLength, uniformSize, typ, name)

    actualLength[1] &lt;= 0 &amp;&amp;  error(&quot;No active uniform at given index. Index: &quot;, index)

    uname = unsafe_string(pointer(name), actualLength[1])
    uname = Symbol(replace(uname, r&quot;\[\d*\]&quot;, &quot;&quot;)) # replace array brackets. This is not really a good solution.
    (uname, typ[1], uniformSize[1])
end</code></pre><pre><code class="language-none">function glGetActiveAttrib(program::GLuint, index::Integer)
    actualLength   = GLsizei[1]
    attributeSize  = GLint[1]
    typ            = GLenum[1]
    maxcharsize    = glGetProgramiv(program, GL_ACTIVE_ATTRIBUTE_MAX_LENGTH)
    name           = Vector{GLchar}(maxcharsize)

    glGetActiveAttrib(program, index, maxcharsize, actualLength, attributeSize, typ, name)

    actualLength[1] &lt;= 0 &amp;&amp; error(&quot;No active uniform at given index. Index: &quot;, index)

    uname = unsafe_string(pointer(name), actualLength[1])
    uname = Symbol(replace(uname, r&quot;\[\d*\]&quot;, &quot;&quot;)) # replace array brackets. This is not really a good solution.
    (uname, typ[1], attributeSize[1])
end</code></pre><pre><code class="language-none">function glGetActiveUniformsiv(program::GLuint, index::Integer, variable::GLenum)
    result = Ref{GLint}(-1)
		#glGetActiveUniformBlockiv(program, index, variable, result)
    result[]
end</code></pre><h2><a class="nav-anchor" id="display-information-for-a-program&#39;s-attributes-1" href="#display-information-for-a-program&#39;s-attributes-1">display information for a program&#39;s attributes</a></h2><pre><code class="language-none">function getAttributesInfo(program::GLuint)
	# how many attribs?
	@show activeAttr = glGetProgramiv(program, GL_ACTIVE_ATTRIBUTES)
	# get location and type for each attrib
	for i=0:activeAttr-1
		@show name, typ, siz = glGetActiveAttrib(program,	i)
		@show loc = glGetAttribLocation(program, name)
	end
end</code></pre><h2><a class="nav-anchor" id="display-info-for-all-active-uniforms-in-a-program-1" href="#display-info-for-all-active-uniforms-in-a-program-1">display info for all active uniforms in a program</a></h2><pre><code class="language-none">function getUniformsInfo(program::GLuint)
	# Get uniforms info (not in named blocks)
	@show activeUnif = glGetProgramiv(program, GL_ACTIVE_UNIFORMS)

	for i=0:activeUnif-1
		@show index = glGetActiveUniformsiv(program, i, GL_UNIFORM_BLOCK_INDEX)
		if (index == -1)
			@show name 		     = glGetActiveUniformName(program, i)
			@show uniType 	   	 = glGetActiveUniformsiv(program, i, GL_UNIFORM_TYPE)

			@show uniSize 	   	 = glGetActiveUniformsiv(program, i, GL_UNIFORM_SIZE)
			@show uniArrayStride = glGetActiveUniformsiv(program, i, GL_UNIFORM_ARRAY_STRIDE)

			auxSize = 0
			if (uniArrayStride &gt; 0)
				@show auxSize = uniArrayStride * uniSize
			else
				@show auxSize = spGLSLTypeSize[uniType]
			end
		end
	end
	# Get named blocks info
	@show count = glGetProgramiv(program, GL_ACTIVE_UNIFORM_BLOCKS)

	for i=0:count-1
		# Get blocks name
		@show name 	 		 = glGetActiveUniformBlockName(program, i)
		@show dataSize 		 = glGetActiveUniformBlockiv(program, i, GL_UNIFORM_BLOCK_DATA_SIZE)

		@show index 	 		 = glGetActiveUniformBlockiv(program, i,  GL_UNIFORM_BLOCK_BINDING)
		@show binding_point 	 = glGetIntegeri_v(GL_UNIFORM_BUFFER_BINDING, index)

		@show activeUnif   	 = glGetActiveUniformBlockiv(program, i, GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS)

		indices = zeros(GLuint, activeUnif)
		glGetActiveUniformBlockiv(program, i, GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES, indices)
		@show indices
		for ubindex in indices
			@show name 		   = glGetActiveUniformName(program, ubindex)
			@show uniType 	   = glGetActiveUniformsiv(program, ubindex, GL_UNIFORM_TYPE)
			@show uniOffset    = glGetActiveUniformsiv(program, ubindex, GL_UNIFORM_OFFSET)
			@show uniSize 	   = glGetActiveUniformsiv(program, ubindex, GL_UNIFORM_SIZE)
			@show uniMatStride = glGetActiveUniformsiv(program, ubindex, GL_UNIFORM_MATRIX_STRIDE)
		end
	end
end</code></pre><h2><a class="nav-anchor" id="display-the-values-for-a-uniform-in-a-named-block-1" href="#display-the-values-for-a-uniform-in-a-named-block-1">display the values for a uniform in a named block```</a></h2><pre><code class="language-none">function getUniformInBlockInfo(program::GLuint, blockName, uniName)
	@show index = glGetUniformBlockIndex(program, blockName)
	if (index == GL_INVALID_INDEX)
		println(&quot;$uniName is not a valid uniform name in block $blockName&quot;)
	end
	@show bindIndex 		= glGetActiveUniformBlockiv(program, index, GL_UNIFORM_BLOCK_BINDING)
	@show bufferIndex 	= glGetIntegeri_v(GL_UNIFORM_BUFFER_BINDING, bindIndex)
	@show uniIndex 			= glGetUniformIndices(program, uniName)

	@show uniType 			= glGetActiveUniformsiv(program, uniIndex, GL_UNIFORM_TYPE)
	@show uniOffset 		= glGetActiveUniformsiv(program, uniIndex, GL_UNIFORM_OFFSET)
	@show uniSize 			= glGetActiveUniformsiv(program, uniIndex, GL_UNIFORM_SIZE)
	@show uniArrayStride 	= glGetActiveUniformsiv(program, uniIndex, GL_UNIFORM_ARRAY_STRIDE)
	@show uniMatStride 		= glGetActiveUniformsiv(program, uniIndex, GL_UNIFORM_MATRIX_STRIDE)
end</code></pre><h2><a class="nav-anchor" id="display-program&#39;s-information-1" href="#display-program&#39;s-information-1">display program&#39;s information</a></h2><pre><code class="language-none">function getProgramInfo(program::GLuint)
	# check if name is really a program
	@show program
	# Get the shader&#39;s name
	@show shaders = glGetAttachedShaders(program)
	for shader in shaders
		@show info = GLENUM(convert(GLenum, glGetShaderiv(shader, GL_SHADER_TYPE))).name
	end
	# Get program info
	@show info = glGetProgramiv(program, GL_PROGRAM_SEPARABLE)
	@show info = glGetProgramiv(program, GL_PROGRAM_BINARY_RETRIEVABLE_HINT)
	@show info = glGetProgramiv(program, GL_LINK_STATUS)
	@show info = glGetProgramiv(program, GL_VALIDATE_STATUS)
	@show info = glGetProgramiv(program, GL_DELETE_STATUS)
	@show info = glGetProgramiv(program, GL_ACTIVE_ATTRIBUTES)
	@show info = glGetProgramiv(program, GL_ACTIVE_UNIFORMS)
	@show info = glGetProgramiv(program, GL_ACTIVE_UNIFORM_BLOCKS)
	@show info = glGetProgramiv(program, GL_ACTIVE_ATOMIC_COUNTER_BUFFERS)
	@show info = glGetProgramiv(program, GL_TRANSFORM_FEEDBACK_BUFFER_MODE)
	@show info = glGetProgramiv(program, GL_TRANSFORM_FEEDBACK_VARYINGS)
end</code></pre><pre><code class="language-none">glSwitch(id::Symbol, on::Bool) = (option = Options[id]; on ? glEnable(option) : glDisable(option))
#glDepthMask(on)</code></pre><pre><code class="language-none">glShaderSource(shaderID::GLuint, source::String) = (shadercode=Vector{UInt8}(string(source,&quot;\x00&quot;)); glShaderSource(shaderID, 1, Ptr{UInt8}[pointer(shadercode)], Ref{GLint}(length(shadercode))))</code></pre><pre><code class="language-none">function glGetShaderSource(shaderID::GLuint)
	len = Ref(GLint(0))
	glGetShaderiv(shaderID, GL_SHADER_SOURCE_LENGTH, len)
	len=len.x

	if len &lt;= 0 return &quot;&quot; end
	println(len)

	sourceLen = len
	source = zeros(GLchar,len)
	len = zeros(GLsizei,1)
	glGetShaderSource(shaderID, sourceLen, pointer(len), pointer(source)) #(shader::GLuint, bufSize::GLsizei, length::Ptr{GLsizei}, source::Ptr{GLchar})::Void

	source=convert(String, source[1:sourceLen-1])
	println(source)
	chomp(readline())
end</code></pre><pre><code class="language-none">function glCompile(shaderID::GLuint, source::String)
	glShaderSource(shaderID, source)
	glCompileShader(shaderID)
end</code></pre><pre><code class="language-none">glGetShaderiv(shaderID::GLuint, variable::GLenum) = (result = Ref{GLint}(-1); glGetShaderiv(shaderID, variable, result); result[])</code></pre><pre><code class="language-none">glGetProgramiv(programID::GLuint, variable::GLenum) = (result = Ref{GLint}(-1); glGetProgramiv(programID, variable, result); result[])</code></pre><pre><code class="language-none">function glGetAttachedShaders(program::GLuint)
    shader_count   = glGetProgramiv(program, GL_ATTACHED_SHADERS)
    length_written = GLsizei[0]
    shaders        = zeros(GLuint, shader_count)

    glGetAttachedShaders(program, shader_count, length_written, shaders)
    shaders[1:first(length_written)]
end</code></pre><pre><code class="language-none">function getValByRef(f::Function, arg)
	ref = Ref(arg)
	f(ref)
	ref.x
end</code></pre><pre><code class="language-none">glString(name::GLenum) = unsafe_string(glGetString(name))</code></pre><pre><code class="language-none">glString(name::GLenum, index::GLuint) = unsafe_string(glGetStringi(name,index))</code></pre><pre><code class="language-none">glGetIntegerv(name::GLenum) = getValByRef((r)-&gt;glGetIntegerv(name,r), GLint(-1))</code></pre><pre><code class="language-none">glGetInteger64v(name::GLenum) = getValByRef((r)-&gt;glGetInteger64v(name,r), GLint64(-1))</code></pre><pre><code class="language-none">glGetBooleanv(name::GLenum) = getValByRef((r)-&gt;glGetBooleanv(name,r), GLboolean(false))</code></pre><pre><code class="language-none">glGetFloatv(name::GLenum) = getValByRef((r)-&gt;glGetFloatv(name,r), GLfloat(-1))</code></pre><pre><code class="language-none">glGetDoublev(name::GLenum) = getValByRef((r)-&gt;glGetDoublev(name,r), GLdouble(-1))</code></pre><pre><code class="language-none">glGetIntegeri_v(name::GLenum, index::GLuint) = getValByRef((r)-&gt;glGetIntegeri_v(name,r), GLint(-1))</code></pre><pre><code class="language-none">glGetInteger64i_v(name::GLenum, index::GLuint) = getValByRef((r)-&gt;glGetInteger64i_v(name,r), GLint64(-1))</code></pre><pre><code class="language-none">glGetBooleani_v(name::GLenum, index::GLuint) = getValByRef((r)-&gt;glGetBooleani_v(name,r), GLboolean(false))</code></pre><pre><code class="language-none">glGetFloati_v(name::GLenum, index::GLuint) = getValByRef((r)-&gt;glGetFloati_v(name,r), GLfloat(-1))</code></pre><pre><code class="language-none">glGetDoublei_v(name::GLenum, index::GLuint) = getValByRef((r)-&gt;glGetDoublei_v(name,r), GLdouble(-1))</code></pre><pre><code class="language-none">function glGet(typ::DataType, name::GLenum)

	fn = nothing
	ti = typeof(index)

	if typ == GLboolean fn = glGetBooleanv
	elseif typ == GLint fn = glGetIntegerv
	elseif typ == GLint64 fn = glGetInteger64v
	elseif typ == GLfloat fn = glGetFloatv
	elseif typ == GLdouble fn = glGetDoublev
	end

	if fn != nothing return fn(name) end #getValByRef((r)-&gt;(fn)(name,r), typ(-1))	end
	nothing
end</code></pre><pre><code class="language-none">function glGet(typ::DataType, name::GLenum, index::GLuint)

	fn = nothing
	ti = typeof(index)

	if typ == GLboolean fn = glGetBooleani_v
	elseif typ == GLint fn = glGetIntegeri_v
	elseif typ == GLint64 fn = glGetInteger64i_v
	elseif typ == GLfloat fn = glGetFloati_v
	elseif typ == GLdouble fn = glGetDoublei_v
	end

	if fn != nothing return fn(name,index) end #getValByRef((r)-&gt;(fn)(name,index,r), typ(-1))	end
	nothing
end</code></pre><pre><code class="language-none">setFragLocation(id::GLuint, name::String, colorNumber=GLuint(0)) = glFragLocation(id, name, colorNumber)</code></pre><pre><code class="language-none">glFragLocation(id::GLuint, name::String, colorNumber::GLuint) = glBindFragDataLocation(id, colorNumber, pointer(string(name,&quot;\x00&quot;)))</code></pre><pre><code class="language-none">glAttribLocation(id::GLuint, name::String) = glGetAttribLocation(id, pointer(string(name,&quot;\x00&quot;)))</code></pre><pre><code class="language-none">glUniformLocation(id::GLuint, name::String) = glGetUniformLocation(id, pointer(string(name,&quot;\x00&quot;)))</code></pre><pre><code class="language-none">glUniform(location::GLint, value::Bool) = glUniform1ui(location, GLuint(value?1:0))
glUniform(location::GLint, value::UInt32) = glUniform1ui(location, GLuint(value))
glUniform(location::GLint, value::UInt64) = glUniform1ui(location, GLuint(value))
glUniform(location::GLint, value::Int32) = glUniform1i(location, GLint(value))
glUniform(location::GLint, value::Int64) = glUniform1i(location, GLint(value))
glUniform(location::GLint, value::Float32) = glUniform1f(location, GLfloat(value))
glUniform(location::GLint, value::Float64) = glUniform1d(location, GLdouble(value))
glUniform(location::GLint, value::Array{Float32,1}) = glUniform1fv(location, length(value), pointer(value))
glUniform(location::GLint, value::Array{Float64,1}) = glUniform1dv(location, length(value), pointer(value))
#glUniform(location::GLint, value::Array{Vec{2, Float32},1}) = glUniform2fv(location, length(value), pointer(value))
#glUniform(location::GLint, value::Array{Vec{3, Float32},1}) = glUniform3fv(location, length(value), pointer(value))
#glUniform(location::GLint, value::Array{Vec{4, Float32},1}) = glUniform4fv(location, length(value), pointer(value))
glUniform(location::GLint, value::Vec2f) = glUniform2fv(location, 1, pointer(convert(Array, value)))
glUniform(location::GLint, value::Vec3f) = glUniform3fv(location, 1, pointer(convert(Array, value)))
glUniform(location::GLint, value::Vec4f) = glUniform4fv(location, 1, pointer(convert(Array, value)))
glUniform(location::GLint, value::Mat2x2f, transpose=false) = glUniformMatrix2fv(location, 1, transpose, pointer(convert(Array, value)))
glUniform(location::GLint, value::Mat3x3f, transpose=false) = glUniformMatrix3fv(location, 1, transpose, pointer(convert(Array, value)))
glUniform(location::GLint, value::Mat4x4f, transpose=false) = glUniformMatrix4fv(location, 1, transpose, pointer(convert(Array, value)))</code></pre><footer><hr/><a class="previous" href="GLDebugControl.html"><span class="direction">Previous</span><span class="title">GLDebugControl.jl</span></a><a class="next" href="GLLists.html"><span class="direction">Next</span><span class="title">GLLists.jl</span></a></footer></article></body></html>
