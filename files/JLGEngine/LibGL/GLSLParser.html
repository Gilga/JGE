<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>GLSLParser.jl · JGE</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link href="../../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>JGE</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../../../manual/start.html">Start</a></li></ul></li><li><span class="toctext">Source Files</span><ul><li><a class="toctext" href="../../App.html">App.jl</a></li><li><a class="toctext" href="../../CoreExtended.html">CoreExtended.jl</a></li><li><a class="toctext" href="../../Environment.html">Environment.jl</a></li><li><a class="toctext" href="../../FileManager.html">FileManager.jl</a></li><li><a class="toctext" href="../../JLScriptManager.html">JLScriptManager.jl</a></li><li><a class="toctext" href="../../LoggerManager.html">LoggerManager.jl</a></li><li><a class="toctext" href="../../MatrixMath.html">MatrixMath.jl</a></li><li><a class="toctext" href="../../RessourceManager.html">RessourceManager.jl</a></li><li><a class="toctext" href="../../ThreadFunctions.html">ThreadFunctions.jl</a></li><li><a class="toctext" href="../../ThreadManager.html">ThreadManager.jl</a></li><li><a class="toctext" href="../../TimeManager.html">TimeManager.jl</a></li><li><a class="toctext" href="../../WindowManager.html">WindowManager.jl</a></li><li><a class="toctext" href="../../JLGEngine.html">JLGEngine.jl</a></li><li><a class="toctext" href="../CameraManager.html">CameraManager.jl</a></li><li><a class="toctext" href="../ChunkManager.html">ChunkManager.jl</a></li><li><a class="toctext" href="../EntityManager.html">EntityManager.jl</a></li><li><a class="toctext" href="../GameObjectManager.html">GameObjectManager.jl</a></li><li><a class="toctext" href="../GraphicsManager.html">GraphicsManager.jl</a></li><li><a class="toctext" href="../Management.html">Management.jl</a></li><li><a class="toctext" href="../MeshManager.html">MeshManager.jl</a></li><li><a class="toctext" href="../ModelManager.html">ModelManager.jl</a></li><li><a class="toctext" href="../RenderManager.html">RenderManager.jl</a></li><li><a class="toctext" href="../ShaderManager.html">ShaderManager.jl</a></li><li><a class="toctext" href="../StorageManager.html">StorageManager.jl</a></li><li><a class="toctext" href="../SzeneManager.html">SzeneManager.jl</a></li><li><a class="toctext" href="../TextureManager.html">TextureManager.jl</a></li><li><a class="toctext" href="../TransformManager.html">TransformManager.jl</a></li><li><a class="toctext" href="../ModelManager/MeshData.html">MeshData.jl</a></li><li><a class="toctext" href="../ModelManager/MeshFabric.html">MeshFabric.jl</a></li><li><a class="toctext" href="../ModelManager/MeshLoader_OBJ.html">MeshLoader_OBJ.jl</a></li><li><a class="toctext" href="LibGL.html">LibGL.jl</a></li><li><a class="toctext" href="GLDebugControl.html">GLDebugControl.jl</a></li><li><a class="toctext" href="GLExtendedFunctions.html">GLExtendedFunctions.jl</a></li><li><a class="toctext" href="GLLists.html">GLLists.jl</a></li><li class="current"><a class="toctext" href="GLSLParser.html">GLSLParser.jl</a><ul class="internal"></ul></li><li><a class="toctext" href="GLSLRessources.html">GLSLRessources.jl</a></li><li><a class="toctext" href="ShaderManager.html">GL/ShaderManager.jl</a></li><li><a class="toctext" href="StorageManager.html">GL/StorageManager.jl</a></li><li><a class="toctext" href="TextureManager.html">GL/TextureManager.jl</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Source Files</li><li><a href="GLSLParser.html">GLSLParser.jl</a></li></ul><a class="edit-page" href="https://github.com/Gilga/JGE/blob/master/doc/src/files/JLGEngine/LibGL/GLSLParser.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>GLSLParser.jl</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="GLSLParser.jl-1" href="#GLSLParser.jl-1">GLSLParser.jl</a></h1><pre><code class="language-none">function readShaders(program::AbstractGraphicsShaderProgram, fileSource::FileSource)
	if program == nothing end

	global shaderAttributes = []
	shaderSource=&quot;&quot;
	globalSource=&quot;&quot;
	lokalSource=&quot;&quot;
	shaderType=nothing
	pbegin=0
	comment=false
	count=0

	#o.logShader.Info(&quot;Shader %s\n&quot;, path)
	
	clear(program)

	shaderCatch = function()
		pend=length(shaderSource)

		if shaderType != nothing
			f=FileSourcePart(fileSource,range(pbegin+1,pend-pbegin))
			f.cache = globalSource * lokalSource #f.source.cache[f.range]
			shader = createShader(program,shaderType,f)
			shader.cache=&quot;&quot; #DEFAULT_SHADER_CODE(shaderType) #default
			lokalSource=&quot;&quot;
			shaderType=nothing
		end

		pbegin = pend
		count+=1
		#o.logShader.Info(&quot;(%v,%v) %s\n&quot;, sourceBegin, sourceEnd, shader.GetSource())
	end

	readLines = function(file)
		for line in eachline(file)
			#line=replace(line, &quot;\r&quot;, &quot;&quot;) #remove windows extra break sign
			line=rstrip(lstrip(line)) #trim
			#line=filter(x -&gt; !isspace(x), line)

			len = length(line)

			if len &lt; 1 continue end

			firstSign = line[1]
			inputFmt = firstSign

			if len &gt; 1 inputFmt = line[1:2] end

			if comment
				if inputFmt == &quot;*/&quot; comment = false end
				#continue
			#elseif firstSign == &#39;\n&#39;
				#continue
			elseif inputFmt == &quot;/*&quot;
				comment = true
				#continue
			elseif inputFmt == &quot;//&quot; # Comment
				#continue

				if len &lt; 3 continue	end

				if line[3] == &#39;!&#39;
					ln = line[3:len]
					len = length(ln)

					if len &lt; 2 continue	end

					sp = split(ln[2:len], &quot; &quot;)
					len = length(sp)
					cmd = &quot;&quot;
					value = &quot;&quot;

					if len &lt; 1 continue end

					cmd = uppercase(lstrip(sp[1]))

					if len &gt; 1
						value = uppercase(rstrip(sp[2]))

						if cmd == &quot;&quot;
							cmd = value
						end
					end

					#o.logShader.Info(&quot;(%s):\n&quot;, value)

					if cmd == value
						value=Symbol(value)
						if haskey(LIST_SHADER,value)
							shaderCatch()
							shaderType=value
						end
						#for (k, v) in SHADER_FILE_TYPE
						#	if v == value
						#		shaderCatch()
						#		shaderType=v
						#		break
						#	end
						#end
					end
				end
				#continue

			else
				findShaderProperty(program, line)
				if count == 0
					globalSource = string(globalSource,line,&quot;\n&quot;)
				else
					lokalSource = string(lokalSource,line,&quot;\n&quot;)
				end
				shaderSource = string(shaderSource,line,&quot;\n&quot;)
			end
		end
		shaderCatch()
		fileSource.cache=shaderSource
		shaderSource != &quot;&quot;
	end

	FileManager.waitForFileReady(fileSource.path,readLines)
end</code></pre><p>include(&quot;GLSLRessources.jl&quot;)</p><footer><hr/><a class="previous" href="GLLists.html"><span class="direction">Previous</span><span class="title">GLLists.jl</span></a><a class="next" href="GLSLRessources.html"><span class="direction">Next</span><span class="title">GLSLRessources.jl</span></a></footer></article></body></html>
